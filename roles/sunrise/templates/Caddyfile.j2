# global options block
{
	storage file_system {
		root	/etc/caddy/storage
	}
	experimental_http3
	email 	{{ admin_email }}
}

# reusable snippets
(boilerplate) {
	encode gzip zstd
	file_server
}

# start site blocks

# test page
www.sunrisemovement.dev {
	root * /srv/sunrisemovement.dev/www/public/
	import boilerplate
	templates {
		between (( ))
	}
}

# redirect no-www to www
sunrisemovement.dev {
	redir https://www.sunrisemovement.dev
}

# handcoded Rhode Island site
ri.sunrisemovement.dev {
	root * /srv/sunrisemovement.dev/ri/public
	import boilerplate
	php_fastcgi unix//var/run/php/php7.3-fpm.sock
}

# handcoded SF Bay website (originally Github Pages)
sfbay.sunrisemovement.dev {
	root * /srv/sunrisemovement.dev/sfbay/public
	import boilerplate
}
sfbay.sunrisemovement.org {
	root * /srv/sunrisemovement.org/sfbay/public
	import boilerplate
}

philadelphia.sunrisemovement.dev {
	root * /srv/sunrisemovement.dev/philadelphia/public
	import boilerplate
}